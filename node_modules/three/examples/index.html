<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<style>
		body {
			margin: 0;
			overflow: hidden;
		}

		.titulo {
			position: absolute;
			text-align: center;
		}
	</style>
</head>

<body>
	<h2 class="titulo">Este es mi primera prueba con ThreeJs</h2>
	<div id="contenedor"></div>

	<script type="importmap">
			{
				"imports": {
					"three": "../build/three.module.js"
				}
			}
		</script>

	<script type="module">
		import * as THREE from 'three';
		import { OrbitControls } from './jsm/controls/OrbitControls.js'
		import { FBXLoader } from './jsm/loaders/FBXLoader.js';

		let camera;
		let scene;
		let renderer;
		let geometry;
		let material;
		let mesh;
		let light;

		init();
		animate();

		function init() {
			camera = new THREE.PerspectiveCamera(
				75,
				window.innerWidth / window.innerHeight,
				1,
				1000
			);
			camera.position.set(0, 0, 600);
			camera.rotation.set(0, 0, 0);

			scene = new THREE.Scene();
			scene.add(camera);

			/* light = new THREE.PointLight( 0xffFF00, 100, 50 );
						light.position.set( 50, 50, 50 );
						scene.add(light); */

			const spotLight = new THREE.SpotLight(0xffffff);
			spotLight.position.set(100, 800, 300);

			spotLight.castShadow = true;

			spotLight.shadow.mapSize.width = 1024 * 2;
			spotLight.shadow.mapSize.height = 1024 * 2;

			spotLight.shadow.camera.near = 500;
			spotLight.shadow.camera.far = 4000;
			spotLight.shadow.camera.fov = 30;

			scene.add(spotLight);

			const spotLightHelper = new THREE.SpotLightHelper(spotLight, "#000");
			scene.add(spotLightHelper);

			// geometry = new THREE.TorusGeometry(100, 30, 16, 50); //radius, detail
			// //material = new THREE.MeshNormalMaterial();

			// material = new THREE.MeshStandardMaterial({
			// 	color: "#D4B483",
			// 	metalness: 0.7,
			// 	roughness: 0.6,
			// 	/*emissive: '#48A9A6',*/
			// 	wireframe: !true,
			// 	wireframeLinewidth: 1,
			// });

			const loader = new FBXLoader();
				loader.load( 'models/pokedex_v2.fbx', function ( pokedex ) {
					pokedex.position.set(-200, -200, 0)
					pokedex.rotation.set(-5 , 0, 0)
					
					scene.add( pokedex );
				} );

			let plano = new THREE.PlaneGeometry(1000, 600, 30, 30);
			let materialPlano = new THREE.MeshStandardMaterial({
				color: "#90042F",
				side: THREE.DoubleSide,
				metalness: 0.1,
				roughness: 0.9,
			});

			let plane = new THREE.Mesh(plano, materialPlano);
			scene.add(plane);
			plane.position.set(0, -200, 0);
			plane.rotation.set(1.6, 0, 0);
			plane.castShadow = true;
			plane.receiveShadow = true;

			mesh = new THREE.Mesh(geometry, material);
			mesh.castShadow = true;
			scene.add(mesh);

			/* const contenedor = document.getElementById('contenedor');

			const renderDiv = new THREE.WebGLRenderer();
			renderDiv.setClearColor("#E4DFDA");
			renderDiv.setSize(window.innerWidth, window.innerHeight);
			contenedor.appendChild(renderDiv.domElement) */
			
			renderer = new THREE.WebGLRenderer();
			renderer.shadowMap.enabled = true;
			renderer.shadowMap.type = THREE.PCFSoftShadowMap;
			renderer.setClearColor("#E4DFDA", 1);
			renderer.setSize(window.innerWidth, window.innerHeight);
			
			document.body.appendChild(renderer.domElement);



			const control = new OrbitControls(camera, renderer.domElement);
			control.minDistance = 100;
			control.maxDistance = 1000;
			
			
		}

		function animate() {
			requestAnimationFrame(animate);
			
			mesh.rotation.x = Date.now() * 0.0;
			mesh.rotation.y = Date.now() * 0.00015;

			renderer.render(scene, camera);
		}

	</script>
</body>

</html>